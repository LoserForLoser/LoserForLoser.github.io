I"ü#<p>å¯é€‰æœ€å¤§æ—¥æœŸè‡³å½“æ—¥æ—¥æœŸçš„æ—¥æœŸè½®é€‰å™¨</p>

<p>PickerController åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ç®—æ˜¯ååˆ†å¸¸è§çš„äº†ï¼Œä¾‹å¦‚ çœå¸‚åŒºåœ°ç†é€‰æ‹©ã€æŸäº›åˆ†ç±»é€‰æ‹© ä»¥åŠ æœ¬æ¡ˆä¾‹çš„æ—¥æœŸé€‰æ‹© ç­‰ç­‰ã€‚</p>

<p>å…¶ä¸­è‹¹æœå®˜æ–¹ç‰¹æ„ä¸ºäº†æ–¹ä¾¿å¹¿å¤§å¼€å‘è€…è€Œå•ç‹¬å‡ºäº†ä¸€ä¸ª UIDataPicker æ¥ç”¨ä½œæ—¥æœŸæ—¶é—´é€‰æ‹©çš„è½®é€‰å™¨ã€‚</p>

<ul>
  <li>
    <p>ä»–ç›´æ¥å†…éƒ¨å°è£…å¥½äº† å¹´ã€æœˆã€æ—¥ æ—¶é—´åˆ†ç»„ï¼Œå¹¶ä¸”å®Œå…¨æŒ‰ç…§æ ‡å‡†ä¸‡å¹´å†æ¥åˆ’å®šæ—¶é—´ï¼Œå…å»äº†æˆ‘ä»¬æ‰‹åŠ¨åˆ†ç»„åˆ†ç±»è®¡ç®—çš„éº»çƒ¦ã€‚ï¼ˆæ— éå°±æ˜¯ å¤§æœˆå°æœˆå¹³æœˆé—°æœˆ çš„è®¡ç®—ï¼Œä½†ç°æˆçš„æ€»æ¯”ç°å†™çš„å¼ºï¼Œè¿˜åŒ…æ­£ç¡®ï¼‰</p>
  </li>
  <li>
    <p>æä¾› minDataã€maxData å±æ€§æ¥è®¾ç½®é€‰æ‹©èŒƒå›´ã€‚</p>
  </li>
</ul>

<p>è¿™ä¸¤æ¡ä¼˜åŠ¿ä¸‹æ¥åŸºæœ¬ä¸Šæ¥è¯´å°±å’Œå†™ä¸€ä¸ªç®€å•çš„ UILabel ä¸€æ ·äº†ï¼Œå…å»æˆ‘ä»¬å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦æ›´ä¸è¦è¯´è¿˜æœ‰äº›å…¶ä»–çš„å®šä¹‰ã€‚</p>

<p>ä½†åŒæ ·çš„ï¼Œè™½ç„¶ä¹¦å†™çµæ´»ï¼Œä½†é¢å¯¹å¤æ‚å¤šå˜çš„åº”ç”¨ç¯å¢ƒï¼Œä»–ä»æ— æ³•åšåˆ°éšå¿ƒæ‰€æ¬²çš„é€‚ç”¨å„åœºæ™¯ã€‚</p>

<p>ä¾‹å¦‚æœ¬æ¡ˆä¾‹çš„è¦æ±‚ï¼šç”¨æˆ·ç”Ÿæ—¥æ—¥æœŸé€‰æ‹©æœ€å¤§åªå¯é€‰æ‹©å½“æ—¥æ—¥æœŸã€‚</p>

<p>ä¹Ÿè®¸æœ‰çš„æœ‹å‹ä¼šè¯´ï¼šé‚£å°±å®æ—¶æ”¹å˜ maxData å°±å¥½äº†å˜›ï¼</p>

<p>è¯è™½å¦‚æ­¤ï¼Œä½† UIDataPicker æ˜¯åŠ¨ç”»åœæ­¢é€‰ä¸­åå¦‚æœè¶…å‡º maxData æ‰è‡ªåŠ¨å›æ»šåˆ° maxData çš„ å¹´ã€æœˆã€æ—¥ã€‚</p>

<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç”¨æˆ·é—²ï¼ˆeï¼‰æ¥ï¼ˆyiï¼‰æ— ï¼ˆcaoï¼‰è¶£ï¼ˆzuoï¼‰çš„è¯ï¼Œå°±ä¼šå‡ºç°ï¼šç”Ÿå‘½ä¸æ¯ï¼ŒåŠ¨ç”»ä¸æ­¢ çš„æ— é™æ»šåŠ¨ä¸‹å»ã€‚å¦å¤– UIDataPicker çš„è®¾å®šæ˜¯ï¼ŒminDataã€maxData èŒƒå›´ä¹‹å¤–çš„æ—¥æœŸä¹Ÿæ­£å¸¸å±•ç¤ºï¼Œåªä¸è¿‡æ˜¯æœ‰ä¸€ä¸ªè‡³ç°æé†’ç½¢äº†ã€‚è¿™æ ·ä¸€æ¥çš„è¯ä¸€æ–¹é¢å¯èƒ½é€ æˆç”¨æˆ·ä½“éªŒä¸å¥½ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¯èƒ½ä¸ç¬¦åˆäº§å“æœ¬èº«çš„ç›®çš„ã€‚ï¼ˆOSï¼šèµ¶ç´§é€‰å®Œç”Ÿæ—¥ç”¨æˆ‘ä»¬çš„ app ï¼Œä¸è¦è¿™è¿™é‡Œçç©æµªè´¹æˆ‘ä»¬çš„æ—¶é—´ï¼ï¼‰</p>

<p>åŸºäºä¸Šè¿°åŸå› ï¼Œç”¨å› PickerController æ˜¯ååˆ†æ­£ç¡®çš„é€‰æ‹©ã€‚</p>

<p>æ€è·¯åŠéƒ¨åˆ†ä»£ç å±•ç¤ºï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// æœ¬é¡¹ç›®èŒƒå›´ï¼š1950-01-01 â€”â€” å½“æ—¥æ—¥æœŸ
{
    // é€‰ä¸­çš„ å¹´ã€æœˆã€æ—¥ åœ¨å…¶å¯¹åº”æ•°æ®æºä¸­çš„ä½ç½®
    NSInteger yearIndex;
    NSInteger monthIndex;
    NSInteger dayIndex;
}
@property (nonatomic, strong) NSDateComponents *comp; // å½“æ—¥æ—¥æœŸ æš¨æ—¥æœŸé€‰æ‹©ä¸Šé™ï¼Œå¦‚æˆ‘åœ¨æœ¬å¸–å‘å¸ƒæ—¥ä½¿ç”¨åˆ™ä¸º 2018-07-25
@property (nonatomic, strong) NSMutableArray *yearArray; //
@property (nonatomic, strong) NSMutableArray *monthArray;
@property (nonatomic, strong) NSMutableArray *dayArray;
</code></pre></div></div>
<p>åˆå§‹åŒ–æ—¶è·å–å½“æ—¥æ—¥æœŸï¼š</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NSCalendar *calendar = [[NSCalendar alloc]
                        initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
// å®šä¹‰ä¸€ä¸ªæ—¶é—´å­—æ®µçš„æ——æ ‡ï¼ŒæŒ‡å®šå°†ä¼šè·å–æŒ‡å®šå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’çš„ä¿¡æ¯
unsigned unitFlags = NSCalendarUnitYear | NSCalendarUnitMonth |  NSCalendarUnitDay | NSCalendarUnitHour |  NSCalendarUnitMinute | NSCalendarUnitSecond | NSCalendarUnitWeekday;
// è·å–ä¸åŒæ—¶é—´å­—æ®µçš„ä¿¡æ¯
self.comp = [calendar components: unitFlags fromDate:[NSDate date]];

// NSDateComponents è¿™ä¸ªç±»ååˆ†ç®€å•ï¼Œå¹´ã€æœˆã€æ—¥ è¢«å®šä¹‰æˆäº†å±æ€§ï¼Œåªéœ€è¦ .yearã€.monthã€.day å°±å¯ä»¥äº†ï¼Œåˆå…´è¶£çš„å¯ä»¥å»çœ‹ä¸€ä¸‹
yearIndex = [self.yearArray indexOfObject:[NSString stringWithFormat:@"%ldå¹´", self.comp.year]];
monthIndex = [self.monthArray indexOfObject:[NSString stringWithFormat:@"%02ldæœˆ", self.comp.month]];
dayIndex = [self.dayArray indexOfObject:[NSString stringWithFormat:@"%02ldæ—¥", self.comp.day]];
</code></pre></div></div>

<p>UIPickerView DataSource ï¼ˆéƒ¨åˆ†ï¼‰</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// è¾ƒæ­£å¸¸çš„ä»£ç é€»è¾‘è€Œè¨€è¿™é‡Œå¤šäº†ä¸ªåˆ¤æ–­å½“æ—¥æ—¥æœŸæ—¶ æœˆã€æ—¥ çš„æ•°ç»„ä¿¡æ¯å±•ç¤º
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    if (component == 0) {
        return self.yearArray.count;
    } else if(component == 1) {
        // å¦‚æœæ˜¯ä»Šå¹´è¿”å›å½“å‰å·²è¿‡æœˆåˆ†æ•°
        if ([self.yearArray[yearIndex] isEqualToString:self.yearArray.lastObject]) {
            return self.comp.month;
        }
        return self.monthArray.count;
    } else {
        // å¦‚æœæ˜¯ä»Šå¹´ä»Šæœˆè¿”å›å½“å‰å·²è¿‡å¤©æ•°
        if ([self.yearArray[yearIndex] isEqualToString:self.yearArray.lastObject] &amp;&amp; self.comp.month - 1 == monthIndex) {
            return self.comp.day;
        }
        switch (monthIndex + 1) {
            case 2:{
                NSString *pickerYear = ((UILabel *)[self.datePicker viewForRow:yearIndex forComponent:0]).text;
                // éœ€è¦è€ƒè™‘é—°å¹´é—°æœˆæƒ…å†µ
                if ([self isleapYear:[pickerYear integerValue]]) {
                    return 29;
                } else {
                    return 28;
                }
            }
            case 4:
            case 6:
            case 9:
            case 11:
                return 30;
            default:
                return 31;
        }
    }
}
</code></pre></div></div>
<p>UIPickerView Delegateï¼ˆéƒ¨åˆ†ï¼‰</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// è¿™é‡Œçš„é€»è¾‘ä¸»è¦æ˜¯ç”¨äºå®æ—¶åˆ·æ–°æ•°æ®æºï¼Œä¿è¯å¯é€‰èŒƒå›´åŠæ˜¾ç¤ºä¸ä¼šå‡ºç°æˆ–è¶…å‡ºå½“æ—¥æ—¥æœŸï¼ˆä¸ªäººè®¤ä¸ºè¿™éƒ¨åˆ†è¿˜æœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œä½†æš‚æ—¶æ²¡æœ‰æƒ³åˆ°å¤ªå¥½çš„é€»è¾‘ï¼‰
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    if (component == 0) {
        yearIndex = row;
        // é‡æ–°åŠ è½½ç¡®ä¿æ˜¯å½“å‰å¹´æœˆæ—¶ä¸å‡ºç°å¤šä½™å¯é€‰èŒƒå›´
        [pickerView reloadComponent:1];
        [pickerView reloadComponent:2];
        // é€‰æ‹©å¹´ä»½æ—¶æœˆæ—¥è¶…å‡ºä»Šæ—¥æ—¥æœŸåˆ™è‡ªåŠ¨æ»šåˆ°ä»Šå¤©
        if ([self.yearArray[row] isEqualToString:self.yearArray.lastObject]) {
            if (self.comp.month - 1 &lt; monthIndex) {
                monthIndex = self.comp.month - 1;
                [self selectActionToPickerView:pickerView row:monthIndex inComponent:1];

                dayIndex = self.comp.day - 1;
                [self selectActionToPickerView:pickerView row:dayIndex inComponent:2];
            }
            // è¿™å—æ–°æ‰‹çš„è¯å¯èƒ½ä¼šè§‰å¾—æœ‰äº›å¤šä½™ï¼Œæˆ‘å°±é—®ä½ ï¼šæœˆä»½æ²¡è¶…æ—¥æœŸè¶…äº†ä½ æ€ä¹ˆåŠï¼Ÿï¼
            if (self.comp.month - 1 == monthIndex &amp;&amp; self.comp.day - 1 &lt; dayIndex) {
                dayIndex = self.comp.day - 1;
                [self selectActionToPickerView:pickerView row:dayIndex inComponent:2];
            }
        }
    } else if (component == 1) {
        monthIndex = row;
        // é‡æ–°åŠ è½½ç¡®ä¿æ˜¯å½“å‰å¹´æœˆæ—¶ä¸å‡ºç°å¤šä½™å¯é€‰èŒƒå›´
        [pickerView reloadComponent:2];
        if (monthIndex + 1 == 4 || monthIndex + 1 == 6 || monthIndex + 1 == 9 || monthIndex + 1 == 11) {
            if (dayIndex + 1 == 31) {
                dayIndex--;
            }
        } else if (monthIndex + 1 == 2) {
            if (dayIndex + 1 &gt; 28) {
                dayIndex = 27;
            }
        }
        // é€‰æ‹©æœˆä»½æ—¶æœˆæ—¥è¶…å‡ºä»Šæ—¥æ—¥æœŸåˆ™è‡ªåŠ¨æ»šåˆ°ä»Šå¤©
        NSString *pickerYear = ((UILabel *)[pickerView viewForRow:yearIndex forComponent:0]).text;
        if ([pickerYear isEqualToString:self.yearArray.lastObject] &amp;&amp; self.comp.month - 1 &lt; monthIndex) {
            monthIndex = self.comp.month - 1;
            dayIndex = self.comp.day - 1;
            [self selectActionToPickerView:pickerView row:monthIndex inComponent:1];
            [self selectActionToPickerView:pickerView row:dayIndex inComponent:2];
        }

        [pickerView selectRow:dayIndex inComponent:2 animated:YES];
    } else {
        dayIndex = row;
        // é€‰æ‹©æ—¥æœŸæ—¶è¶…å‡ºä»Šæ—¥æ—¥æœŸåˆ™è‡ªåŠ¨æ»šåˆ°ä»Šå¤©
        NSString *pickerYear = ((UILabel *)[pickerView viewForRow:yearIndex forComponent:0]).text;
        NSString *pickerMonth = ((UILabel *)[pickerView viewForRow:monthIndex forComponent:1]).text;
        if ([pickerYear isEqualToString:self.yearArray.lastObject] &amp;&amp; [pickerMonth isEqualToString:self.monthArray[self.comp.month - 1]] &amp;&amp; self.comp.day - 1 &lt; dayIndex) {
            dayIndex = self.comp.day - 1;
            [self selectActionToPickerView:pickerView row:dayIndex inComponent:2];
        }
        [pickerView selectRow:dayIndex inComponent:2 animated:YES];
    }
}
</code></pre></div></div>

<p>è‡³æ­¤ï¼Œä¸»è¦çš„æ ¸å¿ƒä»£ç åŠå®å½•å·²ç»å±•ç¤ºå®Œæ¯•ï¼Œä¸‹é¢æ¥çœ‹ä¸€ä¸‹æœ€ç»ˆæ•ˆæœï¼š</p>

<p><img src="https://raw.githubusercontent.com/LoserForLoser/CurrentDateChooseDatePicker/master/GIF/QQ20180720-123110-HD.gif?raw=true" alt="demoæ¼”ç¤º" /></p>

<p>æ€ä¹ˆæ ·ï¼Œè¿˜å¯ä»¥å§ï¼Œæ ¹æœ¬ä¸ä¼šæœ‰ä»»ä½•å¤šä½™çš„æ—¥æœŸå‡ºç°ï¼Œçœ‹éƒ½çœ‹ä¸åˆ°ï¼æ»‘åŠ¨å¤šä½™æ—¥æœŸç©ï¼Ÿä¸å­˜åœ¨çš„ï¼</p>

<p>æœ¬æ–‡æºç ï¼š<a href="https://github.com/LoserForLoser/CurrentDateChooseDatePicker">CurrentDateChooseDatePicker</a></p>

<p>æ¬¢è¿å¤§å®¶æé—®æŒ‡æ•™ï¼</p>
:ET